
<!DOCTYPE html>
<html>
<head>
	<title>Leaflet Quick Start Guide Example</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />


	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" />

	<!-- MarkerCluster https://github.com/danzel/Leaflet.markercluster -->
	<link rel="stylesheet" href="./resources/MarkerCluster.css" />
	<link rel="stylesheet" href="./resources/MarkerCluster.Default.css" />
	<!--[if lte IE 8]> <link rel="stylesheet" href="./resources/MarkerCluster.Default.ie.css" /> <![endif]-->
	<script src="./resources//leaflet.markercluster-src.js"></script>

	<!-- jQuery 1.8.3: http://jquery.com/ -->
	<script src="./resources/jquery.js"></script>

	<style>
	body { margin:0; padding:0; }
	#map { position:absolute; top:0; bottom:0; width:100%; }
	</style>
</head>
<body>
	<script src="./resources/poi.js"></script>
	<div id="map" ></div>

	<script src="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.js"></script>
	<script>

	var map = L.map('map').setView([41.905, 12.6], 8);

	L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://cloudmade.com">CloudMade</a>'
	}).addTo(map);

	var markers = new L.MarkerClusterGroup({ showCoverageOnHover: false,zoomToBoundsOnClick:true});

	var punti = L.geoJson( poi, 
		{pointToLayer: function (feature, latlng) {


			if (feature.properties.poi_category_term == 'Chiesa') {
				var raggio = 4
				var colore = "#F92672"
				var icona = "./resources/images/church-2.png" 	
				var myIcon = L.Icon.extend({
					iconUrl: './resources/images/church-2.png'
				}) 				
			}
			else if (feature.properties.poi_category_term == 'Museo') {
				var raggio = 4
				var colore = "#FD971E"
				var icona = "./resources/images/art-museum-2.png"
				var myIcon = L.Icon.extend({
					iconUrl: './resources/images/art-museum-2.png'
				}) 				
			}
			else {
				var raggio = 4
				var colore = "#FD971E"
				var icona = "./resources/images/art-museum-2.png"
				var myIcon = L.Icon.extend({
					iconUrl: './resources/images/art-museum-2.png'
				}) 				
			}
			return new L.Marker(latlng, {
				icon: new myIcon({
					iconUrl: icona,
					iconSize: [32, 37],
					iconAnchor:   [16, 37],
					popupAnchor:  [0, -30] ,
					shadowUrl: "./resources/shadow.png",
					shadowSize: [51, 37]
				})
			});
		},
		onEachFeature: function(feature, layer)
		{
			layer.bindPopup(feature.properties.poi_label_term);
		}
	});

		//map.addLayer(punti);

		markers.addLayer(punti);
		//map.addLayer(acetate);
		//map.addLayer(mapquest);
		map.addLayer(markers);
		
		map.fitBounds(markers.getBounds());


		map.attributionControl.setPosition('bottomleft');
		map.attributionControl.addAttribution("PinPoint da <a href='http://www.comune.palermo.it/'>Comune di Palermo</a>");
      //L.control.attribution ({position: 'bottomleft'}).addTo(map);

      </script>
  </body>
  </html>
