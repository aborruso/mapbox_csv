<!DOCTYPE html>
<html>
<head>
	<meta charset=utf-8 />
	<title>Pinpoints</title>

	<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
	<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.js'></script>
	<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.css' rel='stylesheet' />

	<style>
	body { margin:0; padding:0; }
	#map { position:absolute; top:0; bottom:0; width:100%; }
	</style>
</head>
<body>

	<script src='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/leaflet.markercluster.js'></script>
	<link href='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.css' rel='stylesheet' />
	<link href='//api.tiles.mapbox.com/mapbox.js/plugins/leaflet-markercluster/v0.4.0/MarkerCluster.Default.css' rel='stylesheet' />

	<script src='http://api.tiles.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.0.1/leaflet-omnivore.min.js'></script>
	<div id='map'></div>
	<script>
	var map = L.mapbox.map('map');

	var realvista = L.tileLayer.wms("http://213.215.135.196/reflector/open/service?", {
		layers: 'rv1',
		format: 'image/jpeg',
		attribution: "RealVista1.0 WMS OPEN di e-GEOS SpA - CC BY SA"
	}).addTo(map); 


	var punti = omnivore.geojson('poi.geojson')
	.on('ready', function() {
		map.fitBounds(punti.getBounds());
		var markers = L.markerClusterGroup();
		var points_rand = L.geoJson(punti, {
			onEachFeature: function (feature, layer) 
			{
				layer.bindPopup("hi! I am one of thousands"); 
			}   
		});
		markers.addLayer(points_rand);
		map.addLayer(markers);

	});




	</script>


</body>
</html>